<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>水产品供应链温度控制展示</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a2a43, #1a5f7a);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: white;
            overflow-x: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background: rgba(5, 25, 45, 0.9);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(64, 224, 208, 0.3);
        }
        
        header {
            background: linear-gradient(90deg, #0c3a5c, #0f5b7d);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
            border-bottom: 2px solid #40e0d0;
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(64, 224, 208, 0.7);
        }
        
        header p {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
            color: #a8dadc;
        }
        
        .animation-container {
            padding: 40px 20px;
            position: relative;
            height: 550px;
            overflow: hidden;
        }
        
        .supply-chain {
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            transform: translateY(-50%);
        }
        
        .supply-path {
            position: relative;
            height: 10px;
            background: rgba(64, 224, 208, 0.2);
            border-radius: 5px;
            margin: 0 50px;
            overflow: visible;
        }
        
        .supply-path::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, #0f9, #40e0d0, #0f9);
            border-radius: 5px;
            animation: pathGlow 2s infinite alternate;
        }
        
        @keyframes pathGlow {
            0% { box-shadow: 0 0 5px rgba(64, 224, 208, 0.5); }
            100% { box-shadow: 0 0 20px rgba(64, 224, 208, 0.8); }
        }
        
        .stages {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin: 0 30px;
            top: -40px;
            z-index: 20;
        }
        
        .stage {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            padding: 0 10px;
            z-index: 10;
        }
        
        .stage-icon {
            width: 80px;
            height: 80px;
            background: rgba(15, 45, 70, 0.9);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 2;
            font-size: 2rem;
            color: #40e0d0;
            border: 2px solid #40e0d0;
            transition: all 0.5s ease;
            cursor: pointer;
        }
        
        .stage.active .stage-icon {
            background: #40e0d0;
            color: #0a2a43;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(64, 224, 208, 0.8);
        }
        
        .temp-indicator {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff6b6b;
            color: white;
            font-size: 0.8rem;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            box-shadow: 0 0 8px rgba(255, 107, 107, 0.8);
        }
        
        .stage-label {
            margin-top: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            color: white;
            background: rgba(15, 45, 70, 0.8);
            padding: 8px 15px;
            border-radius: 30px;
            min-width: 120px;
            transition: all 0.5s ease;
        }
        
        .stage.active .stage-label {
            background: #40e0d0;
            color: #0a2a43;
            box-shadow: 0 0 15px rgba(64, 224, 208, 0.6);
        }
        
        .temperature-selector {
            margin-top: 10px;
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 30;
            position: relative;
        }
        
        .stage.active .temperature-selector {
            opacity: 1;
        }
        
        .temp-btn {
            width: 50px;
            height: 30px;
            border-radius: 15px;
            border: none;
            background: rgba(64, 224, 208, 0.2);
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid rgba(64, 224, 208, 0.5);
        }
        
        .temp-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 10px rgba(64, 224, 208, 0.5);
        }
        
        .temp-btn.selected {
            background: linear-gradient(45deg, #ff8c00, #ff4500);
            box-shadow: 0 0 15px rgba(255, 140, 0, 0.7);
            font-weight: bold;
        }
        
        .fish-animation {
            position: absolute;
            top: 50%;
            left: 5%;
            transform: translateY(-50%);
            z-index: 15;
            transition: left 6s linear;
        }
        
        .fish {
            position: relative;
            width: 100px;
            height: 50px;
            transition: all 1s ease;
        }
        
        .fish-body {
            position: absolute;
            width: 80px;
            height: 40px;
            background: linear-gradient(90deg, #4a8fe7, #2a6bcc);
            border-radius: 50%;
            top: 5px;
            left: 10px;
            box-shadow: 0 0 10px rgba(42, 107, 204, 0.6);
            transition: all 1s ease;
        }
        
        .fish-tail {
            position: absolute;
            width: 30px;
            height: 40px;
            background: linear-gradient(90deg, #2a6bcc, #1d4f9e);
            border-radius: 50%;
            top: 5px;
            left: 90px;
            clip-path: polygon(0 0, 100% 25%, 100% 75%, 0 100%);
            transition: all 1s ease;
        }
        
        .fish-fin {
            position: absolute;
            width: 60px;
            height: 20px;
            background: #1d4f9e;
            border-radius: 50%;
            top: -10px;
            left: 50px;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            transition: all 1s ease;
        }
        
        .eye {
            position: absolute;
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            top: 20px;
            left: 25px;
            box-shadow: 0 0 5px white;
            transition: all 1s ease;
        }
        
        .eye::after {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            background: black;
            border-radius: 50%;
            top: 3px;
            left: 3px;
            transition: all 1s ease;
        }
        
        .fish-parts {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .fish-fillet {
            position: absolute;
            width: 70px;
            height: 30px;
            background: linear-gradient(90deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
            top: 10px;
            left: 15px;
            display: none;
            box-shadow: 0 0 10px rgba(248, 249, 250, 0.4);
        }
        
        .processing-effect {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }
        
        .progress-container {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 0 50px;
            margin-top: 30px;
        }
        
        .progress-bar {
            height: 12px;
            background: rgba(64, 224, 208, 0.1);
            border-radius: 6px;
            flex: 1;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #40e0d0, #20b2aa);
            width: 0%;
            border-radius: 6px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(64, 224, 208, 0.5);
        }
        
        .progress-text {
            font-size: 1.1rem;
            color: #40e0d0;
            font-weight: bold;
            min-width: 70px;
            text-shadow: 0 0 5px rgba(64, 224, 208, 0.7);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 25px;
            background: rgba(0, 20, 40, 0.7);
            border-top: 1px solid rgba(64, 224, 208, 0.2);
        }
        
        .btn {
            padding: 12px 30px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            background: linear-gradient(45deg, #0f5b7d, #0c3a5c);
            color: #a8dadc;
            border: 1px solid #40e0d0;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
            background: linear-gradient(45deg, #0c3a5c, #0f5b7d);
            color: white;
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn i {
            font-size: 1.3rem;
        }
        
        .stage-info {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            max-width: 800px;
            background: rgba(0, 30, 60, 0.9);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(64, 224, 208, 0.3);
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 25;
        }
        
        .stage-info.active {
            opacity: 1;
        }
        
        .stage-title {
            font-size: 1.8rem;
            color: #40e0d0;
            margin-bottom: 10px;
        }
        
        .stage-description {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #e0f7fa;
        }
        
        .bubbles {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        
        .bubble {
            position: absolute;
            bottom: -50px;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: rise 10s infinite ease-in;
        }
        
        .bubble:nth-child(1) { left: 10%; animation-delay: 0s; }
        .bubble:nth-child(2) { left: 20%; animation-delay: 2s; width: 15px; height: 15px; }
        .bubble:nth-child(3) { left: 35%; animation-delay: 4s; width: 25px; height: 25px; }
        .bubble:nth-child(4) { left: 50%; animation-delay: 1s; }
        .bubble:nth-child(5) { left: 65%; animation-delay: 5s; width: 18px; height: 18px; }
        .bubble:nth-child(6) { left: 80%; animation-delay: 3s; }
        .bubble:nth-child(7) { left: 90%; animation-delay: 6s; width: 12px; height: 12px; }
        
        @keyframes rise {
            0% { bottom: -50px; transform: translateX(0); opacity: 0; }
            10% { opacity: 0.5; }
            50% { transform: translateX(50px); }
            100% { bottom: 100%; transform: translateX(100px); opacity: 0; }
        }
        
        /* 鱼游泳动画 */
        @keyframes swim {
            0% { transform: translateY(-50%) rotate(0deg); }
            25% { transform: translateY(-55%) rotate(-5deg); }
            50% { transform: translateY(-50%) rotate(0deg); }
            75% { transform: translateY(-45%) rotate(5deg); }
            100% { transform: translateY(-50%) rotate(0deg); }
        }
        
        .swimming {
            animation: swim 1.5s infinite ease-in-out;
        }
        
        /* 加工动画 */
        @keyframes processing {
            0% { width: 0; height: 0; opacity: 0.8; }
            100% { width: 200px; height: 200px; opacity: 0; }
        }
        
        .final-dish {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            min-height: 200px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            display: none;
            z-index: 20;
            background: rgba(0, 0, 0, 0.8);
            border: 3px solid #ff8c00;
            padding: 30px;
            text-align: center;
        }
        
        .dish-info {
            padding: 10px;
        }
        
        .dish-title {
            font-size: 2.2rem;
            color: #ff8c00;
            margin-bottom: 15px;
            text-shadow: 0 0 10px rgba(255, 140, 0, 0.5);
        }
        
        .dish-desc {
            font-size: 1.3rem;
            color: #e0f7fa;
            line-height: 1.6;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .dish-reason {
            font-size: 1.1rem;
            color: #a8dadc;
            font-style: italic;
            margin-top: 20px;
            line-height: 1.7;
        }
        
        .temp-history {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 30, 60, 0.9);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #40e0d0;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            z-index: 30;
        }
        
        .temp-history h3 {
            color: #40e0d0;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .temp-history-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid rgba(64, 224, 208, 0.3);
        }
        
        .temp-history-item:last-child {
            border-bottom: none;
        }
        
        .temp-stage {
            color: #a8dadc;
        }
        
        .temp-value {
            color: #ff8c00;
            font-weight: bold;
        }
        
        @media (max-width: 900px) {
            .animation-container {
                height: 500px;
            }
            
            .supply-path {
                margin: 0 30px;
            }
            
            .stage-icon {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .stage-label {
                font-size: 0.9rem;
                min-width: 100px;
                padding: 6px 10px;
            }
            
            .temp-btn {
                width: 40px;
                height: 25px;
                font-size: 0.8rem;
            }
            
            .fish {
                width: 80px;
                height: 40px;
            }
            
            .fish-body {
                width: 60px;
                height: 30px;
            }
            
            .fish-tail {
                width: 20px;
                height: 30px;
                left: 70px;
            }
            
            .fish-fin {
                width: 40px;
                height: 15px;
                left: 40px;
            }
            
            .eye {
                width: 10px;
                height: 10px;
                left: 20px;
                top: 15px;
            }
            
            .temp-history {
                top: 10px;
                right: 10px;
                padding: 10px;
                font-size: 0.9rem;
            }
            
            .final-dish {
                width: 320px;
            }
        }
        
        @media (max-width: 600px) {
            header h1 {
                font-size: 2rem;
            }
            
            header p {
                font-size: 1rem;
            }
            
            .animation-container {
                height: 450px;
            }
            
            .supply-path {
                margin: 0 15px;
            }
            
            .stage-icon {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            .stage-label {
                font-size: 0.8rem;
                min-width: 80px;
                padding: 4px 8px;
            }
            
            .temp-btn {
                width: 35px;
                height: 22px;
                font-size: 0.7rem;
            }
            
            .progress-container {
                padding: 0 20px;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .stage-info {
                bottom: 80px;
                padding: 15px;
            }
            
            .stage-title {
                font-size: 1.4rem;
            }
            
            .stage-description {
                font-size: 0.9rem;
            }
            
            .final-dish {
                width: 280px;
                padding: 20px;
            }
            
            .dish-title {
                font-size: 1.8rem;
            }
            
            .dish-desc {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-fish"></i> 水产品供应链温度控制展示</h1>
            <p>选择不同贮藏温度，观察温度如何影响鱼的品质和最终菜肴！</p>
        </header>
        
        <div class="animation-container">
            <div class="bubbles">
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
            </div>
            
            <div class="supply-chain">
                <div class="supply-path"></div>
                
                <div class="stages">
                    <div class="stage active" data-stage="1">
                        <div class="stage-icon"><i class="fas fa-water"></i></div>
                        <div class="stage-label">养殖场</div>
                        <div class="temperature-selector">
                            <button class="temp-btn" data-temp="20">20°C</button>
                            <button class="temp-btn" data-temp="15">15°C</button>
                            <button class="temp-btn" data-temp="10">10°C</button>
                        </div>
                    </div>
                    <div class="stage" data-stage="2">
                        <div class="stage-icon"><i class="fas fa-anchor"></i></div>
                        <div class="stage-label">捕捞</div>
                        <div class="temperature-selector">
                            <button class="temp-btn" data-temp="15">15°C</button>
                            <button class="temp-btn" data-temp="10">10°C</button>
                            <button class="temp-btn" data-temp="5">5°C</button>
                        </div>
                    </div>
                    <div class="stage" data-stage="3">
                        <div class="stage-icon"><i class="fas fa-industry"></i></div>
                        <div class="stage-label">加工厂</div>
                        <div class="temperature-selector">
                            <button class="temp-btn" data-temp="5">5°C</button>
                            <button class="temp-btn" data-temp="0">0°C</button>
                            <button class="temp-btn" data-temp="-5">-5°C</button>
                        </div>
                    </div>
                    <div class="stage" data-stage="4">
                        <div class="stage-icon"><i class="fas fa-truck"></i></div>
                        <div class="stage-label">物流运输</div>
                        <div class="temperature-selector">
                            <button class="temp-btn" data-temp="5">5°C</button>
                            <button class="temp-btn" data-temp="0">0°C</button>
                            <button class="temp-btn" data-temp="-18">-18°C</button>
                        </div>
                    </div>
                    <div class="stage" data-stage="5">
                        <div class="stage-icon"><i class="fas fa-store"></i></div>
                        <div class="stage-label">超市/市场</div>
                        <div class="temperature-selector">
                            <button class="temp-btn" data-temp="4">4°C</button>
                            <button class="temp-btn" data-temp="0">0°C</button>
                            <button class="temp-btn" data-temp="-18">-18°C</button>
                        </div>
                    </div>
                    <div class="stage" data-stage="6">
                        <div class="stage-icon"><i class="fas fa-utensils"></i></div>
                        <div class="stage-label">餐桌</div>
                    </div>
                </div>
                
                <div class="fish-animation swimming" id="fish-animation">
                    <div class="fish">
                        <div class="fish-body">
                            <div class="fish-tail"></div>
                            <div class="fish-fin"></div>
                            <div class="eye"></div>
                        </div>
                        <div class="fish-parts">
                            <div class="fish-fillet" id="fillet"></div>
                        </div>
                    </div>
                </div>
                
                <div class="processing-effect" id="processing-effect"></div>
                
                <div class="final-dish" id="final-dish">
                    <div class="dish-info">
                        <div class="dish-title" id="dish-title">清蒸鱼</div>
                        <div class="dish-desc" id="dish-desc">低温保鲜，肉质鲜嫩</div>
                        <div class="dish-reason" id="dish-reason">全程低温控制，鱼肉纤维完整，适合清蒸</div>
                    </div>
                </div>
            </div>
            
            <div class="stage-info" id="stage-info">
                <h2 class="stage-title" id="stage-title">养殖场阶段</h2>
                <p class="stage-description" id="stage-desc">鱼苗在专业养殖场中生长，水质和温度对鱼的生长速度和质量有重要影响。</p>
            </div>
            
            <div class="temp-history">
                <h3><i class="fas fa-thermometer-half"></i> 温度记录</h3>
                <div class="temp-history-item">
                    <span class="temp-stage">养殖场:</span>
                    <span class="temp-value" id="temp-1">未选择</span>
                </div>
                <div class="temp-history-item">
                    <span class="temp-stage">捕捞:</span>
                    <span class="temp-value" id="temp-2">未选择</span>
                </div>
                <div class="temp-history-item">
                    <span class="temp-stage">加工厂:</span>
                    <span class="temp-value" id="temp-3">未选择</span>
                </div>
                <div class="temp-history-item">
                    <span class="temp-stage">物流:</span>
                    <span class="temp-value" id="temp-4">未选择</span>
                </div>
                <div class="temp-history-item">
                    <span class="temp-stage">超市:</span>
                    <span class="temp-value" id="temp-5">未选择</span>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress" id="progress"></div>
                </div>
                <div class="progress-text" id="progress-text">1/6</div>
            </div>
        </div>
        
        <div class="controls">
            <button class="btn" id="prev-btn">
                <i class="fas fa-arrow-left"></i> 上一步
            </button>
            <button class="btn" id="play-btn">
                <i class="fas fa-play"></i> 播放动画
            </button>
            <button class="btn" id="pause-btn">
                <i class="fas fa-pause"></i> 暂停
            </button>
            <button class="btn" id="next-btn">
                下一步 <i class="fas fa-arrow-right"></i>
            </button>
            <button class="btn" id="reset-btn">
                <i class="fas fa-redo"></i> 重置
            </button>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const fishAnimation = document.getElementById('fish-animation');
            const progress = document.getElementById('progress');
            const progressText = document.getElementById('progress-text');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const playBtn = document.getElementById('play-btn');
            const pauseBtn = document.getElementById('pause-btn');
            const resetBtn = document.getElementById('reset-btn');
            const stages = document.querySelectorAll('.stage');
            const stageInfo = document.getElementById('stage-info');
            const stageTitle = document.getElementById('stage-title');
            const stageDesc = document.getElementById('stage-desc');
            const finalDish = document.getElementById('final-dish');
            const dishTitle = document.getElementById('dish-title');
            const dishDesc = document.getElementById('dish-desc');
            const dishReason = document.getElementById('dish-reason');
            const tempValues = [
                document.getElementById('temp-1'),
                document.getElementById('temp-2'),
                document.getElementById('temp-3'),
                document.getElementById('temp-4'),
                document.getElementById('temp-5')
            ];
            
            // 菜肴数据 - 精确匹配
            const dishData = [
                {
                    id: 'steamed',
                    title: "清蒸鱼",
                    desc: "低温保鲜，肉质鲜嫩",
                    reason: "全程低温控制（平均温度 ≤ 5°C），鱼肉纤维完整，蛋白质结构保持良好，适合清蒸烹饪方式。"
                },
                {
                    id: 'sashimi',
                    title: "生鱼片",
                    desc: "全程冷链保鲜，肉质晶莹",
                    reason: "各环节严格温控（平均温度 ≤ 0°C），鱼肉新鲜度极高，微生物含量低于安全标准，适合生食。"
                },
                {
                    id: 'fried',
                    title: "香酥炸鱼",
                    desc: "冷冻保存，外酥里嫩",
                    reason: "加工或物流环节使用了冷冻处理（温度 ≤ -10°C），鱼肉水分结晶后解冻，组织结构发生变化，适合油炸烹饪。"
                },
                {
                    id: 'soup',
                    title: "鱼头豆腐汤",
                    desc: "高温影响，适合炖汤",
                    reason: "部分环节温度过高（>10°C），导致鱼肉蛋白质部分分解，产生更多风味物质，特别适合炖汤。"
                },
                {
                    id: 'grilled',
                    title: "炭烤鱼",
                    desc: "普通保存，烟熏风味",
                    reason: "温度控制一般（平均温度 5-10°C），鱼肉部分酶解产生特殊风味物质，适合炭烤增添风味。"
                },
                {
                    id: 'braised',
                    title: "红烧鱼",
                    desc: "中温处理，浓香入味",
                    reason: "温度控制中等（平均温度 0-5°C），鱼肉保持一定弹性，肌纤维完整，适合红烧酱烧烹饪。"
                }
            ];
            
            const positions = ['5%', '21%', '37%', '53%', '69%', '85%'];
            let currentStage = 1;
            let isPlaying = false;
            let animationInterval;
            const tempChoices = [null, null, null, null, null];
            const tempIndicators = [];
            
            // 初始化温度指示器
            document.querySelectorAll('.stage-icon').forEach((icon, index) => {
                const indicator = document.createElement('div');
                indicator.className = 'temp-indicator';
                indicator.style.display = 'none';
                icon.appendChild(indicator);
                tempIndicators.push(indicator);
            });
            
            const stageData = [
                {
                    title: "养殖场阶段",
                    desc: "鱼苗在专业养殖场中生长，水质和温度对鱼的生长速度和质量有重要影响。选择适宜的温度有助于鱼类健康成长。"
                },
                {
                    title: "捕捞阶段",
                    desc: "捕捞后的温度控制至关重要。高温会导致鱼体快速腐败，低温有助于保持鱼的鲜度。请选择合适的处理温度。"
                },
                {
                    title: "加工厂阶段",
                    desc: "在加工厂，鱼会被清洗、处理并包装。低温环境能抑制细菌生长，延长保质期。选择最佳加工温度。"
                },
                {
                    title: "物流运输阶段",
                    desc: "运输过程中的温度控制直接影响鱼的品质。冷链运输能最大程度保持鱼的新鲜度。请选择合适的运输温度。"
                },
                {
                    title: "超市/市场阶段",
                    desc: "销售环节的温度管理是最后一道保鲜关卡。低温展示柜能保持鱼的鲜度直到消费者购买。"
                },
                {
                    title: "餐桌阶段",
                    desc: "根据您选择的温度控制方案，鱼已准备好被烹饪成美味佳肴！"
                }
            ];
            
            // 设置温度选择事件
            document.querySelectorAll('.temp-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const stage = this.closest('.stage').dataset.stage;
                    const temp = this.dataset.temp;
                    
                    // 更新温度选择
                    tempChoices[stage-1] = temp;
                    tempValues[stage-1].textContent = temp + "°C";
                    tempIndicators[stage-1].textContent = temp;
                    tempIndicators[stage-1].style.display = 'block';
                    
                    // 更新按钮状态
                    this.closest('.temperature-selector').querySelectorAll('.temp-btn').forEach(b => {
                        b.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    
                    // 更新鱼的外观（根据温度）
                    updateFishAppearance();
                    
                    // 显示温度影响信息
                    showTempEffect(stage, temp);
                });
            });
            
            function updateFishAppearance() {
                const fish = document.querySelector('.fish');
                const fishBody = document.querySelector('.fish-body');
                
                // 根据温度改变鱼的外观
                if (currentStage >= 3 && tempChoices[2] && parseInt(tempChoices[2]) <= -5) {
                    // 冷冻效果
                    fishBody.style.background = 'linear-gradient(90deg, #a0c0e0, #8090c0)';
                    fish.style.opacity = '0.8';
                } else if (currentStage >= 2 && tempChoices.some(t => t && parseInt(t) > 10)) {
                    // 高温影响
                    fishBody.style.background = 'linear-gradient(90deg, #e77, #c55)';
                    fish.style.opacity = '0.9';
                } else {
                    // 正常状态
                    fishBody.style.background = 'linear-gradient(90deg, #4a8fe7, #2a6bcc)';
                    fish.style.opacity = '1';
                }
            }
            
            function showTempEffect(stage, temp) {
                const tempInt = parseInt(temp);
                let effect = "";
                
                if (tempInt <= 0) {
                    effect = "低温保鲜，品质优秀";
                } else if (tempInt <= 5) {
                    effect = "良好保鲜，品质良好";
                } else if (tempInt <= 10) {
                    effect = "一般保鲜，品质尚可";
                } else {
                    effect = "高温影响，品质下降";
                }
                
                stageTitle.textContent = "温度影响: " + temp + "°C";
                stageDesc.textContent = effect + " - " + stageData[currentStage-1].desc;
                stageInfo.classList.add('active');
                
                setTimeout(() => {
                    stageInfo.classList.remove('active');
                }, 3000);
            }
            
            function updateStage(stage) {
                currentStage = stage;
                
                // 更新鱼的位置
                fishAnimation.style.left = positions[stage - 1];
                
                // 更新进度
                const progressPercent = ((stage - 1) / 5) * 100;
                progress.style.width = progressPercent + '%';
                progressText.textContent = `${stage}/6`;
                
                // 更新阶段激活状态
                stages.forEach((s, index) => {
                    if (parseInt(s.dataset.stage) === stage) {
                        s.classList.add('active');
                    } else {
                        s.classList.remove('active');
                    }
                });
                
                // 更新信息卡片
                stageTitle.textContent = stageData[stage - 1].title;
                stageDesc.textContent = stageData[stage - 1].desc;
                stageInfo.classList.add('active');
                
                // 自动隐藏信息卡片
                setTimeout(() => {
                    stageInfo.classList.remove('active');
                }, 4000);
                
                // 在最后一个阶段显示菜肴
                if (stage === 6) {
                    setTimeout(() => {
                        showFinalDish();
                    }, 1000);
                } else {
                    finalDish.style.display = 'none';
                }
            }
            
            function showFinalDish() {
                // 确定最终菜肴类型
                let dishType = dishData[0]; // 默认清蒸鱼
                
                // 根据温度选择确定菜肴
                const lowTempCount = tempChoices.filter(t => t && parseInt(t) <= 0).length;
                const highTempCount = tempChoices.filter(t => t && parseInt(t) > 10).length;
                const frozen = tempChoices.some(t => t && parseInt(t) <= -10);
                
                if (frozen) {
                    dishType = dishData[2]; // 香酥炸鱼
                } else if (lowTempCount >= 4) {
                    dishType = dishData[1]; // 生鱼片
                } else if (highTempCount >= 2) {
                    dishType = dishData[3]; // 鱼头豆腐汤
                } else if (lowTempCount >= 2) {
                    dishType = dishData[0]; // 清蒸鱼
                } else if (highTempCount === 1) {
                    dishType = dishData[4]; // 炭烤鱼
                } else {
                    dishType = dishData[5]; // 红烧鱼
                }
                
                // 更新菜肴信息
                dishTitle.textContent = dishType.title;
                dishDesc.textContent = dishType.desc;
                dishReason.textContent = dishType.reason;
                
                // 显示菜肴
                finalDish.style.display = 'block';
            }
            
            function nextStage() {
                if (currentStage < 6) {
                    updateStage(currentStage + 1);
                } else {
                    pauseAnimation();
                }
            }
            
            function prevStage() {
                if (currentStage > 1) {
                    updateStage(currentStage - 1);
                }
            }
            
            function playAnimation() {
                if (!isPlaying) {
                    isPlaying = true;
                    playBtn.innerHTML = '<i class="fas fa-play"></i> 继续';
                    
                    if (currentStage === 6) {
                        currentStage = 0;
                    }
                    
                    animationInterval = setInterval(() => {
                        if (currentStage < 6) {
                            nextStage();
                        } else {
                            pauseAnimation();
                        }
                    }, 3000);
                }
            }
            
            function pauseAnimation() {
                if (isPlaying) {
                    clearInterval(animationInterval);
                    isPlaying = false;
                    playBtn.innerHTML = '<i class="fas fa-play"></i> 继续';
                }
            }
            
            function resetAnimation() {
                pauseAnimation();
                tempChoices.fill(null);
                tempValues.forEach(el => el.textContent = '未选择');
                tempIndicators.forEach(ind => {
                    ind.style.display = 'none';
                });
                document.querySelectorAll('.temp-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                updateFishAppearance();
                updateStage(1);
                finalDish.style.display = 'none';
            }
            
            // 事件监听
            playBtn.addEventListener('click', playAnimation);
            pauseBtn.addEventListener('click', pauseAnimation);
            resetBtn.addEventListener('click', resetAnimation);
            nextBtn.addEventListener('click', nextStage);
            prevBtn.addEventListener('click', prevStage);
            
            // 初始状态
            updateStage(1);
        });
    </script>
</body>
</html>